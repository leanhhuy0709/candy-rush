(()=>{"use strict";var e,t={11:(e,t,i)=>{var s=i(260);const r={score:0,highscore:0,gridWidth:8,gridHeight:8,tileWidth:64,tileHeight:72,margin:10,candyTypes:["cookie1","cookie2","croissant","cupcake","donut","eclair","macaroon","pie","poptart1","poptart2","starcookie1","starcookie2"]};var n;!function(e){e.LOADING="LoadingScene",e.GAMEPLAY="GamePlayScene"}(n||(n={}));class a extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.setOrigin(.5,.5).setInteractive().setDepth(5),this.graphics=this.scene.add.graphics().lineStyle(2,12183295).setVisible(!1).setDepth(4),this.graphics.strokeRoundedRect(0,0,this.width+2,this.height),this.setGraphics(),this.scene.add.existing(this),this.tween=this.scene.tweens.add({targets:this,angle:360,duration:1500,ease:"Linear",repeat:-1}),this.tween.pause()}spin(){this.tween.resume()}unSpin(){this.tween.pause(),this.scene.tweens.add({targets:this,angle:0,duration:500,ease:"Power2"})}showGraphics(){this.setGraphics(),this.graphics.setVisible(!0)}hideGraphics(){this.graphics.setVisible(!1)}setGraphics(){const e=this.width+2,t=this.height;this.graphics.x=this.x-e/2,this.graphics.y=this.y-t/2}}class l extends Phaser.Scene{constructor(){super({key:n.GAMEPLAY})}create(){this.firstSelectedTile=null,this.secondSelectedTile=null,this.tileGrid=[];for(let e=0;e<r.gridHeight;e++){this.tileGrid[e]=[];for(let t=0;t<r.gridWidth;t++)this.tileGrid[e].push(this.getRandomTile(e,t))}this.input.on("gameobjectdown",this.onTileClicked,this)}update(){}getRandomTile(e,t){const i=this.cameras.main.width,s=r.candyTypes[Phaser.Math.RND.between(0,r.candyTypes.length-1)];return new a({scene:this,x:r.tileWidth/2+e*(r.tileWidth+r.margin)+(i-(r.tileWidth+r.margin)*r.gridWidth),y:r.tileHeight/2+t*(r.tileHeight+r.margin),texture:s})}onTileClicked(e,t){this.firstSelectedTile?this.secondSelectedTile||(this.secondSelectedTile=t,this.secondSelectedTile.spin(),this.secondSelectedTile.showGraphics(),this.swapTiles()):(this.firstSelectedTile=t,this.firstSelectedTile.spin(),this.firstSelectedTile.showGraphics())}swapTiles(){if(this.firstSelectedTile&&this.secondSelectedTile){const e=this.firstSelectedTile.x,t=this.firstSelectedTile.y;this.tweens.add({targets:this.firstSelectedTile,x:this.secondSelectedTile.x,y:this.secondSelectedTile.y,duration:1500,ease:"Linear",onComplete:()=>{var e,t;null===(e=this.firstSelectedTile)||void 0===e||e.unSpin(),null===(t=this.firstSelectedTile)||void 0===t||t.hideGraphics(),this.firstSelectedTile=null}}),this.tweens.add({targets:this.secondSelectedTile,x:e,y:t,duration:1500,ease:"Linear",onComplete:()=>{var e,t;null===(e=this.secondSelectedTile)||void 0===e||e.unSpin(),null===(t=this.secondSelectedTile)||void 0===t||t.hideGraphics(),this.secondSelectedTile=null}})}}resetSelect(){this.firstSelectedTile=null,this.secondSelectedTile=null}}class h extends Phaser.Scene{constructor(){super({key:n.LOADING})}preload(){this.cameras.main.setBackgroundColor(10016391),this.load.pack("preload","./assets/pack.json","preload")}update(){this.scene.start("GamePlayScene")}}const c={title:"Candy Rush",url:"https://github.com/leanhhuy0709/candy-rush",version:"2.0",type:Phaser.AUTO,parent:"Game",scene:[h,l],input:{keyboard:!0},width:600,height:800,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.Center.CENTER_BOTH},backgroundColor:"#63289e",render:{pixelArt:!1,antialias:!0}};class d extends s.Game{constructor(e){super(e)}}window.addEventListener("load",(()=>{new d(c)}))}},i={};function s(e){var r=i[e];if(void 0!==r)return r.exports;var n=i[e]={exports:{}};return t[e].call(n.exports,n,n.exports,s),n.exports}s.m=t,e=[],s.O=(t,i,r,n)=>{if(!i){var a=1/0;for(d=0;d<e.length;d++){for(var[i,r,n]=e[d],l=!0,h=0;h<i.length;h++)(!1&n||a>=n)&&Object.keys(s.O).every((e=>s.O[e](i[h])))?i.splice(h--,1):(l=!1,n<a&&(a=n));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,r,n]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var r,n,[a,l,h]=i,c=0;if(a.some((t=>0!==e[t]))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(h)var d=h(s)}for(t&&t(i);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},i=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var r=s.O(void 0,[216],(()=>s(11)));r=s.O(r)})();